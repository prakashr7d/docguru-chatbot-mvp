version: "2.0"
stories:

- story: intro
  steps:
  - intent: greet
  - action: personal_greet

- story: anything else deny
  steps:
  - action: utter_anything_else
  - intent: deny
  - action: utter_i_am_here_for_you

- story: order status already logged in happy path + anything else affirm
  steps:
  - intent: order_status
  - slot_was_set:
    - is_logged_in: true
  - active_loop: null
  - action: action_order_status
  - intent: show_more
  - action: show_more_action

- story: order status already logged in happy path + anything else deny
  steps:
  - intent: order_status
  - slot_was_set:
    - is_logged_in: true
  - active_loop: null
  - action: action_order_status
  - intent: show_more
  - action: show_more_action

- story: order status with login happy path + anything else affirm
  steps:
  - intent: order_status
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - action: utter_not_logged_in_prompt
  - action: login_form
  - active_loop: login_form
  - active_loop: null
  - action: action_login_form
  - slot_was_set:
    - is_logged_in: true
  - action: action_order_status
  - intent: show_more
  - action: show_more_action

- story: Order status - Unregistered user - repair path - anything else affirm
  steps:
  - intent: order_status
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - action: utter_not_logged_in_prompt
  - action: login_form
  - active_loop: login_form
  - active_loop: null
  - action: action_login_form
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - intent: affirm
  - action: utter_signed_up_user_failed_login_response
  - action: utter_anything_else
  - intent: affirm
  - action: utter_anything_else_options

- story: Order status - registered user - repair path - anything else deny
  steps:
  - intent: order_status
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - action: utter_not_logged_in_prompt
  - action: login_form
  - active_loop: login_form
  - active_loop: null
  - action: action_login_form
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - intent: affirm
  - action: utter_signed_up_user_failed_login_response
  - action: utter_anything_else
  - intent: deny
  - action: utter_i_am_here_for_you


- story: Order status - Unregistered user - repair path - anything else deny
  steps:
  - intent: order_status
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - action: utter_not_logged_in_prompt
  - action: login_form
  - active_loop: login_form
  - active_loop: null
  - action: action_login_form
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - intent: deny
  - action: utter_anything_else
  - intent: deny
  - action: utter_i_am_here_for_you

- story: Order status - Unregistered user - repair path - anything else deny
  steps:
  - intent: order_status
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - action: utter_not_logged_in_prompt
  - action: login_form
  - active_loop: login_form
  - active_loop: null
  - action: action_login_form
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - intent: deny
  - action: utter_anything_else
  - intent: affirm
  - action: utter_anything_else_options

- story: Unblock login
  steps:
  - slot_was_set:
      - login_blocked: true
  - intent: EXTERNAL_unblock_login
  - action: action_unblock_login

- story: order status + show more
  steps:
  - intent: order_status
  - slot_was_set:
    - is_logged_in: true
  - action: action_order_status
  - intent: show_more
  - action: show_more_action

- story: show more
  steps:
  - intent: show_more
  - action: show_more_action

- story: return order with login
  steps:
  - intent: return_order
  - slot_was_set:
    - is_logged_in: true
  - action: action_show_valid_return_order
  - intent: select_return_order
  - action: return_order_form
  - active_loop: return_order_form
  - active_loop: null
  - action: action_return_order
  - action: utter_anything_else

- story: return order with login happy path + anything else affirm
  steps:
  - intent: return_order
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - action: utter_not_logged_in_prompt
  - action: login_form
  - active_loop: login_form
  - active_loop: null
  - action: action_login_form
  - slot_was_set:
    - is_logged_in: true
  - action: action_show_valid_return_order
  - intent: select_return_order
  - action: return_order_form
  - active_loop: return_order_form
  - active_loop: null
  - action: action_return_order
  - action: utter_anything_else

- story: return order freestyle with login happy path + anything else affirm
  steps:
  - intent: select_return_order
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - action: utter_not_logged_in_prompt
  - action: login_form
  - active_loop: login_form
  - active_loop: null
  - action: action_login_form
  - slot_was_set:
    - is_logged_in: true
  - action: return_order_form
  - active_loop: return_order_form
  - active_loop: null
  - action: action_return_order
  - action: utter_anything_else

- story: replace order
  steps:
  - intent: replace_order
  - action: utter_replace_order_inprogress
  - action: utter_anything_else_options

- story: return order - happy path
  steps:
  - intent: greet
  - action: personal_greet
  - slot_was_set:
    - user_email: dishant@neuralspace.ai
  - slot_was_set:
    - user_first_name: Dishant
  - slot_was_set:
    - user_last_name: Gandhi
  - slot_was_set:
    - is_logged_in: true
  - slot_was_set:
    - user_otp: '1234'
  - intent: return_order
  - action: action_show_valid_return_order
  - slot_was_set:
    - action_that_triggered_show_more: null
  - slot_was_set:
    - show_more_count: -1
  - slot_was_set:
    - is_show_more_triggered: false
  - intent: select_return_order
    entities:
    - order_id: DASH123457
    - number: 123457
  - action: return_order_form
  - active_loop: return_order_form
  - slot_was_set:
    - order_id_for_return: DASH123457
  - slot_was_set:
    - requested_slot: return_a_reason
  - intent: ask_return_a_reason
    entities:
    - return_a_reason: Quality issues
  - slot_was_set:
    - return_a_reason: Quality issues
  - action: return_order_form
  - slot_was_set:
    - return_a_reason: Quality issues
  - slot_was_set:
    - requested_slot: return_a_reason_description
  - intent: ask_return_a_reason
    entities:
    - return_a_reason: product
  - slot_was_set:
    - return_a_reason: product
  - action: return_order_form
  - slot_was_set:
    - return_a_reason_description: I got a damaged product
  - slot_was_set:
    - return_a_reason: product
  - slot_was_set:
    - requested_slot: return_e_type
  - intent: ask_return_e_type
    entities:
    - return_e_type: Return Product
  - slot_was_set:
    - return_e_type: Return Product
  - action: return_order_form
  - slot_was_set:
    - return_e_type: Return Product
  - slot_was_set:
    - requested_slot: return_pickup_address
  - intent: order_status
  - action: return_order_form
  - slot_was_set:
    - return_pickup_address: my building, my country
  - slot_was_set:
    - requested_slot: return_refund_account
  - intent: ask_return_refund_account
    entities:
    - return_refund_account: Primary Account
  - slot_was_set:
    - return_refund_account: Primary Account
  - action: return_order_form
  - slot_was_set:
    - return_refund_account: Primary Account
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: action_return_order
  - slot_was_set:
    - order_id_for_return: null
  - slot_was_set:
    - return_a_reason: null
  - slot_was_set:
    - return_a_reason_description: null
  - slot_was_set:
    - return_pickup_address: null
  - slot_was_set:
    - return_refund_account: null
  - action: utter_anything_else
  - intent: ask_return_refund_account
    entities:
    - return_refund_account: Primary Account
  - slot_was_set:
    - return_refund_account: Primary Account
  - action: action_default_fallback
  - intent: deny
  - action: utter_i_am_here_for_you

- story: return order freestyle, login
  steps:
  - intent: select_return_order
    entities:
    - order_id: DASH123457
    - number: 123457
  - action: utter_not_logged_in_prompt
  - action: login_form
  - active_loop: login_form
  - slot_was_set:
    - user_otp: null
  - slot_was_set:
    - otp_tries: 1
  - slot_was_set:
    - requested_slot: user_email
  - intent: inform
    entities:
    - email: dishant@neuralspace.ai
  - action: login_form
  - slot_was_set:
    - user_email: dishant@neuralspace.ai
  - slot_was_set:
    - requested_slot: user_otp
  - intent: inform
    entities:
    - number: 1234
  - action: login_form
  - slot_was_set:
    - user_otp: 1234
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: action_login_form
  - slot_was_set:
    - user_email: dishant@neuralspace.ai
  - slot_was_set:
    - user_first_name: Dishant
  - slot_was_set:
    - user_last_name: Gandhi
  - slot_was_set:
    - is_logged_in: true
  - slot_was_set:
    - user_otp: '1234'
  - action: return_order_form
  - active_loop: return_order_form
  - slot_was_set:
    - requested_slot: order_id_for_return
  - intent: select_return_order
    entities:
    - order_id: DASH123457
    - number: 123457
  - action: return_order_form
  - slot_was_set:
    - order_id_for_return: DASH123457
  - slot_was_set:
    - requested_slot: return_a_reason
  - intent: ask_return_a_reason
    entities:
    - return_a_reason: Don't need the Product
  - slot_was_set:
    - return_a_reason: Don't need the Product
  - action: return_order_form
  - slot_was_set:
    - return_a_reason: Don't need the Product
  - slot_was_set:
    - requested_slot: return_a_reason_description
  - intent: affirm
  - action: return_order_form
  - slot_was_set:
    - return_a_reason_description: it is trash
  - slot_was_set:
    - requested_slot: return_e_type
  - intent: ask_return_e_type
    entities:
    - return_e_type: Return Product
  - slot_was_set:
    - return_e_type: Return Product
  - action: return_order_form
  - slot_was_set:
    - return_e_type: Return Product
  - slot_was_set:
    - requested_slot: return_pickup_address
  - intent: affirm
  - action: return_order_form
  - slot_was_set:
    - return_pickup_address: my adddress
  - slot_was_set:
    - requested_slot: return_refund_account
  - intent: ask_return_refund_account
    entities:
    - return_refund_account: Credit Points
  - slot_was_set:
    - return_refund_account: Credit Points
  - action: return_order_form
  - slot_was_set:
    - return_refund_account: Credit Points
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: action_return_order
  - slot_was_set:
    - order_id_for_return: null
  - slot_was_set:
    - return_a_reason: null
  - slot_was_set:
    - return_a_reason_description: null
  - slot_was_set:
    - return_pickup_address: null
  - slot_was_set:
    - return_refund_account: null
  - action: utter_anything_else
  - intent: deny
  - action: utter_i_am_here_for_you

- story: return order switch to order status
  steps:
  - intent: greet
  - action: personal_greet
  - slot_was_set:
    - is_logged_in: false
  - intent: return_order
  - action: utter_not_logged_in_prompt
  - action: login_form
  - active_loop: login_form
  - active_loop: null
  - action: action_login_form
  - slot_was_set:
    - is_logged_in: true
  - action: action_show_valid_return_order
  - intent: select_return_order
  - action: return_order_form
  - active_loop: return_order_form
  - intent: order_status
  - action: utter_ask_switch_form
  - intent: affirm
  - action: action_ask_switch
  - active_loop: null
  - action: action_order_status
  - action: utter_anything_else
