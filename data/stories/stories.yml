version: "2.0"
stories:

- story: intro
  steps:
  - intent: greet
  - action: personal_greet

- story: anything else deny
  steps:
  - action: utter_anything_else
  - intent: deny
  - action: utter_i_am_here_for_you

- story: order status already logged in happy path + anything else affirm
  steps:
  - intent: check_all_orders
  - slot_was_set:
    - is_logged_in: true
  - active_loop: null
  - action: action_check_all_orders
  - intent: show_more
  - action: show_more_action

- story: order status already logged in happy path + anything else deny
  steps:
  - intent: check_all_orders
  - slot_was_set:
    - is_logged_in: true
  - active_loop: null
  - action: action_check_all_orders
  - intent: show_more
  - action: show_more_action

- story: order status with login happy path + anything else affirm
  steps:
  - intent: check_all_orders
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - action: utter_not_logged_in_prompt
  - action: login_form
  - active_loop: login_form
  - active_loop: null
  - action: action_login_form
  - slot_was_set:
    - is_logged_in: true
  - action: action_check_all_orders
  - intent: show_more
  - action: show_more_action

- story: Order status - Unregistered user - repair path - anything else affirm
  steps:
  - intent: check_all_orders
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - action: utter_not_logged_in_prompt
  - action: login_form
  - active_loop: login_form
  - active_loop: null
  - action: action_login_form
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - intent: affirm
  - action: utter_signed_up_user_failed_login_response
  - action: utter_anything_else
  - intent: affirm
  - action: utter_anything_else_options

- story: Order status - registered user - repair path - anything else deny
  steps:
  - intent: check_all_orders
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - action: utter_not_logged_in_prompt
  - action: login_form
  - active_loop: login_form
  - active_loop: null
  - action: action_login_form
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - intent: affirm
  - action: utter_signed_up_user_failed_login_response
  - action: utter_anything_else
  - intent: deny
  - action: utter_i_am_here_for_you


- story: Order status - Unregistered user - repair path - anything else deny
  steps:
  - intent: check_all_orders
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - action: utter_not_logged_in_prompt
  - action: login_form
  - active_loop: login_form
  - active_loop: null
  - action: action_login_form
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - intent: deny
  - action: utter_anything_else
  - intent: deny
  - action: utter_i_am_here_for_you

- story: Order status - Unregistered user - repair path - anything else deny
  steps:
  - intent: check_all_orders
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - action: utter_not_logged_in_prompt
  - action: login_form
  - active_loop: login_form
  - active_loop: null
  - action: action_login_form
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - intent: deny
  - action: utter_anything_else
  - intent: affirm
  - action: utter_anything_else_options

- story: Unblock login
  steps:
  - slot_was_set:
      - login_blocked: true
  - intent: EXTERNAL_unblock_login
  - action: action_unblock_login

- story: order status + show more
  steps:
  - intent: check_all_orders
  - slot_was_set:
    - is_logged_in: true
  - action: action_check_all_orders
  - intent: show_more
  - action: show_more_action

- story: show more
  steps:
  - intent: show_more
  - action: show_more_action

- story: return order with login
  steps:
  - intent: return_order
  - slot_was_set:
    - is_logged_in: true
  - action: action_show_valid_return_order
  - intent: select_return_order
  - action: return_order_form
  - active_loop: return_order_form
  - active_loop: null
  - action: action_return_order
  - action: utter_anything_else

- story: return order with login happy path + anything else affirm
  steps:
  - intent: return_order
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - action: utter_not_logged_in_prompt
  - action: login_form
  - active_loop: login_form
  - active_loop: null
  - action: action_login_form
  - slot_was_set:
    - is_logged_in: true
  - action: action_show_valid_return_order
  - intent: select_return_order
  - action: return_order_form
  - active_loop: return_order_form
  - active_loop: null
  - action: action_return_order
  - action: utter_anything_else

- story: return order freestyle with login happy path + anything else affirm
  steps:
  - intent: select_return_order
  - slot_was_set:
    - is_logged_in: false
  - slot_was_set:
    - login_blocked: false
  - action: utter_not_logged_in_prompt
  - action: login_form
  - active_loop: login_form
  - active_loop: null
  - action: action_login_form
  - slot_was_set:
    - is_logged_in: true
  - action: return_order_form
  - active_loop: return_order_form
  - active_loop: null
  - action: action_return_order
  - action: utter_anything_else

- story: replace order
  steps:
  - intent: replace_order
  - action: utter_replace_order_inprogress
  - action: utter_anything_else_options